# ğŸ  å®¶åº­å·¥æ—¶è®°è´¦ç³»ç»Ÿ (Family Work Ledger)

ä¸€ä¸ªä¸“ä¸ºå®¶åº­è®¾è®¡çš„å·¥æ—¶ä¸è´¦å•è®°å½•ç³»ç»Ÿï¼Œå¸®åŠ©çˆ¶æ¯è½»æ¾è®°å½•ä¸´æ—¶å·¥äººçš„å·¥ä½œæƒ…å†µï¼ˆå¦‚è£…ä¿®å·¥äººã€ä¿æ´é˜¿å§¨ã€ç»´ä¿®å¸ˆå‚…ç­‰ï¼‰ã€‚

> **æŠ€æœ¯æ ˆ**ï¼šFastAPI (Python) åç«¯ + Flutter ç§»åŠ¨ç«¯

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
bill/
â”œâ”€â”€ ğŸ“‚ åç«¯ (FastAPI + SQLite)
â”‚   â”œâ”€â”€ main.py                 # ğŸš€ FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ requirements.txt        # Python ä¾èµ–
â”‚   â”œâ”€â”€ data.db                 # SQLite æ•°æ®åº“ï¼ˆè¿è¡Œåç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”œâ”€â”€ database.py         # æ•°æ®åº“è¿æ¥é…ç½®
â”‚   â”‚   â””â”€â”€ init_db.py          # è¡¨åˆå§‹åŒ–
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ user.py             # ç”¨æˆ· ORM æ¨¡å‹
â”‚   â”‚   â””â”€â”€ bill.py             # è´¦å• ORM æ¨¡å‹
â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â”œâ”€â”€ user.py             # ç”¨æˆ· Pydantic æ¨¡å¼
â”‚   â”‚   â””â”€â”€ bill.py             # è´¦å• Pydantic æ¨¡å¼
â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”œâ”€â”€ auth.py             # è®¤è¯è·¯ç”± (æ³¨å†Œ/ç™»å½•)
â”‚   â”‚   â””â”€â”€ bills.py            # è´¦å•è·¯ç”± (CRUD/ç»Ÿè®¡/å¯¼å‡º)
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ auth_service.py     # è®¤è¯ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ bill_service.py     # è´¦å•ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ jwt.py              # JWT å·¥å…·
â”‚
â””â”€â”€ ğŸ“‚ flutter_app/ (Flutter ç§»åŠ¨ç«¯)
    â”œâ”€â”€ pubspec.yaml            # Flutter ä¾èµ–é…ç½®
    â”œâ”€â”€ android/
    â”‚   â””â”€â”€ app/src/main/
    â”‚       â””â”€â”€ AndroidManifest.xml  # Android æƒé™é…ç½®
    â”œâ”€â”€ ios/
    â”‚   â””â”€â”€ Runner/
    â”‚       â””â”€â”€ Info.plist      # iOS æƒé™é…ç½®
    â””â”€â”€ lib/
        â”œâ”€â”€ main.dart           # ğŸš€ Flutter å…¥å£
        â”œâ”€â”€ config/
        â”‚   â””â”€â”€ app_config.dart # API åœ°å€ç­‰å¸¸é‡é…ç½®
        â”œâ”€â”€ models/
        â”‚   â””â”€â”€ bill.dart       # Dart æ•°æ®æ¨¡å‹
        â”œâ”€â”€ services/
        â”‚   â””â”€â”€ api_service.dart # HTTP API è°ƒç”¨å°è£…
        â””â”€â”€ pages/
            â””â”€â”€ add_bill_page.dart # è®°å·¥æ—¶é¡µé¢
```

---

## âœ¨ åŠŸèƒ½ç‰¹è‰²

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| ğŸ“ **è´¦å•è®°å½•** | è®°å½•é‡‘é¢ã€åˆ†ç±»ã€æ—¥æœŸã€å¤‡æ³¨ |
| ğŸ‘· **å·¥äººç®¡ç†** | è®°å½•å·¥äººå§“åã€å·¥ä½œæ—¶é•¿ã€æ”¯ä»˜æ–¹å¼ |
| ğŸ¤ **è¯­éŸ³è¾“å…¥** | é•¿æŒ‰è¯´è¯ï¼Œè‡ªåŠ¨è¯†åˆ«å·¥äººã€æ—¶é—´ã€å·¥æ—¶ |
| ğŸ¤– **æ™ºèƒ½è®¡ç®—** | è‡ªåŠ¨æŠ½å–æ—¶è–ª/å·¥æ—¶å¹¶è®¡ç®—æ€»é‡‘é¢ï¼Œè¡¨å•é¢„å¡«å…… |
| ğŸ“Š **ç»Ÿè®¡åˆ†æ** | æŒ‰æœˆ/æŒ‰åˆ†ç±»/æŒ‰å·¥äººæ±‡æ€» |
| ğŸ“¤ **CSV å¯¼å‡º** | å¯¼å‡ºè´¦å•åˆ° Excel |
| ğŸ” **å¤šç”¨æˆ·** | æ”¯æŒå®¶åº­æˆå‘˜å„è‡ªç™»å½• |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ å¯åŠ¨åç«¯

```powershell
# è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
cd d:\Projects\bill

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆé¦–æ¬¡ï¼‰
python -m venv .venv
.\.venv\Scripts\Activate.ps1

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

åç«¯å¯åŠ¨åè®¿é—®ï¼š
- **API æ–‡æ¡£**ï¼šhttp://127.0.0.1:8000/docs
- **å¥åº·æ£€æŸ¥**ï¼šhttp://127.0.0.1:8000/health

### 2ï¸âƒ£ é…ç½® Flutter

```powershell
# è¿›å…¥ Flutter ç›®å½•
cd d:\Projects\bill\flutter_app

# è·å–ä¾èµ–
flutter pub get

# ä¿®æ”¹ API åœ°å€ï¼ˆé‡è¦ï¼ï¼‰
# ç¼–è¾‘ lib/config/app_config.dart
# å°† apiBaseUrl æ”¹ä¸ºä½ ç”µè„‘çš„å±€åŸŸç½‘ IP
```

### 3ï¸âƒ£ è¿è¡Œ Flutter åº”ç”¨

```powershell
# è¿æ¥æ‰‹æœºæˆ–å¯åŠ¨æ¨¡æ‹Ÿå™¨å
flutter run
```

---

## ğŸ“‹ è´¦å•å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `amount` | float | âœ… | é‡‘é¢ï¼ˆå…ƒï¼‰ |
| `bill_type` | string | âœ… | `income` æˆ– `expense` |
| `category` | string | âœ… | åˆ†ç±»ï¼šäººå·¥/ææ–™/é¤é¥®ç­‰ |
| `date` | datetime | âœ… | æ—¥æœŸ + å…·ä½“æ—¶åˆ†ç§’ |
| `worker` | string | âŒ | å·¥äººå§“å |
| `duration_hours` | float | âŒ | å·¥ä½œæ—¶é•¿ï¼ˆå°æ—¶ï¼‰ |
| `hourly_rate` | float | âŒ | æ—¶è–ªå•ä»·ï¼ˆå…ƒ/å°æ—¶ï¼‰ |
| `pay_method` | string | âŒ | æ”¯ä»˜æ–¹å¼ |
| `note` | string | âŒ | å¤‡æ³¨ |

---

## ğŸ“¡ API æ¥å£

### è®¤è¯
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/auth/register` | æ³¨å†Œ |
| POST | `/auth/login` | ç™»å½• |
| GET | `/auth/me` | å½“å‰ç”¨æˆ· |

### è´¦å•
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/bills/` | åˆ›å»ºè´¦å• |
| GET | `/bills/` | è´¦å•åˆ—è¡¨ |
| GET | `/bills/{id}` | å•ä¸ªè´¦å• |
| PUT | `/bills/{id}` | æ›´æ–° |
| DELETE | `/bills/{id}` | åˆ é™¤ |

### ç»Ÿè®¡
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/bills/statistics/monthly` | æœˆåº¦ç»Ÿè®¡ |
| GET | `/bills/statistics/category` | åˆ†ç±»ç»Ÿè®¡ |
| GET | `/bills/statistics/worker` | å·¥äººç»Ÿè®¡ |
| GET | `/bills/export` | å¯¼å‡º CSV |

---

## ğŸ¤ è¯­éŸ³è¯†åˆ«ç¤ºä¾‹

é•¿æŒ‰"è¯­éŸ³åŠ©æ‰‹"æŒ‰é’®è¯´ï¼š

> "å¼ å¸ˆå‚…ä»Šå¤©å¤§å·¥ï¼Œ8å°æ—¶"

ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ï¼š
- å·¥äººï¼šå¼ å¸ˆå‚…
- å·¥æ—¶ï¼š8 å°æ—¶

æ”¯æŒçš„è¯­éŸ³å…³é”®è¯ï¼š
- **å·¥æ—¶**ï¼šåŠå·¥(4h)ã€å¤§å·¥(8h)ã€åŠ ç­ã€Xå°æ—¶
- **å·¥äºº**ï¼šé¢„è®¾åå•ã€æˆ–â€œXXå¸ˆå‚…/é˜¿å§¨/å”å”â€ç­‰ç§°è°“

---

## ğŸ§  æ™ºèƒ½è¯­éŸ³è§£æ & è‡ªåŠ¨è®¡ç®—

- **æ—¶é—´ç‚¹æå–**ï¼šè¯†åˆ«â€œä¸‹åˆ1ç‚¹â€â€œæ—©ä¸Š8:30â€ç­‰è‡ªç„¶è¯­è¨€æ—¶é—´ï¼Œå¹¶ä¸æ‰€é€‰æ—¥æœŸåˆå¹¶ï¼Œç²¾ç¡®åˆ°åˆ†é’Ÿã€‚
- **æ—¶è–ª/æ€»ä»·æ¨å¯¼**ï¼šè§£æâ€œæ¯å°æ—¶30å—â€â€œ30å—é’±ä¸€ä¸ªå·¥æ—¶â€ç­‰è¡¨è¾¾ï¼›å½“åŒæ—¶è¯†åˆ«å‡ºæ—¶è–ªä¸å·¥æ—¶åï¼Œè‡ªåŠ¨è®¡ç®—é‡‘é¢å¹¶åœ¨è¡¨å•ä¸­æ ‡æ³¨â€œ30å…ƒ/h Ã— 4hâ€ã€‚
- **ä¹±åºå®¹é”™**ï¼šæ— è®ºè¯´â€œç‹äº” 3å°æ—¶ 120å—â€è¿˜æ˜¯â€œ120å—ç»™ç‹äº”å¹²äº†3å°æ—¶â€ï¼Œéƒ½èƒ½æ˜ å°„åˆ°æ­£ç¡®å­—æ®µã€‚
- **äººå·¥æ ¡éªŒ**ï¼šè¯­éŸ³ç»“æŸåä»…é¢„å¡«è¡¨å•ï¼Œä¸ç›´æ¥æäº¤ï¼›åŒæ—¶åœ¨å¤‡æ³¨ä¸­è¿½åŠ  `[è¯­éŸ³åŸæ–‡] ...` æ–¹ä¾¿å†æ¬¡æ ¸å¯¹ã€‚

**é«˜çº§ç¤ºä¾‹**

> â€œç‹äº”æ˜¯ä¸‹åˆ1ç‚¹æ¥çš„ï¼Œå¹²äº†4ä¸ªå°æ—¶ï¼Œè¯´å¥½30å—é’±ä¸€ä¸ªå·¥æ—¶ã€‚â€

è§£æç»“æœï¼š

| å­—æ®µ | è§£æå€¼ |
|------|--------|
| Worker | ç‹äº” |
| Date | 2025-11-30 13:00:00 |
| Duration | 4.0 å°æ—¶ |
| Hourly Rate | 30.0 å…ƒ/h |
| Amount | 120.0 å…ƒï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰ |
| Note | [è¯­éŸ³åŸæ–‡] â€¦ + [è¯­éŸ³æ¨æ–­] åŸºäº 30å…ƒ/h Ã— 4h |

---

## âš™ï¸ é…ç½®è¯´æ˜

### Flutter API åœ°å€é…ç½®

ç¼–è¾‘ `flutter_app/lib/config/app_config.dart`ï¼š

```dart
static const String apiBaseUrl = 'http://192.168.1.100:8000';
//                                ^^^^^^^^^^^^^^
//                                æ”¹ä¸ºä½ ç”µè„‘çš„å±€åŸŸç½‘ IP
```

æŸ¥çœ‹ç”µè„‘ IPï¼š
```powershell
ipconfig | Select-String "IPv4"
```

### Android æƒé™ï¼ˆå·²é…ç½®ï¼‰

- `INTERNET` - ç½‘ç»œè®¿é—®
- `RECORD_AUDIO` - éº¦å…‹é£ï¼ˆè¯­éŸ³è¯†åˆ«ï¼‰

### iOS æƒé™ï¼ˆå·²é…ç½®ï¼‰

- `NSMicrophoneUsageDescription` - éº¦å…‹é£
- `NSSpeechRecognitionUsageDescription` - è¯­éŸ³è¯†åˆ«

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

**Made with â¤ï¸ for families**
